[gd_scene load_steps=7 format=3 uid="uid://dnnqprjo6fe5"]

[ext_resource type="Script" path="res://Enemies/SkeletonArcher/skeleton_archer.gd" id="1_8yf44"]
[ext_resource type="Texture2D" uid="uid://cebmu1fiutxry" path="res://Resources/Final/Normal Attack.png" id="1_y5soi"]
[ext_resource type="Script" path="res://Enemies/SkeletonArcher/state_machine.gd" id="3_b3okb"]
[ext_resource type="Script" path="res://ClassTemplates/enemy_idle_template.gd" id="3_evkvh"]
[ext_resource type="Script" path="res://Enemies/SkeletonArcher/attack_state.gd" id="5_516a3"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_hvpsw"]
radius = 6.0
height = 38.0

[node name="SkeletonArcher" type="CharacterBody2D"]
collision_layer = 2
collision_mask = 33
script = ExtResource("1_8yf44")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("1_y5soi")
hframes = 8
vframes = 4
frame = 6

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(1, 2)
shape = SubResource("CapsuleShape2D_hvpsw")

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("3_b3okb")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("3_evkvh")
enemy = Object(CharacterBody2D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(0, 0),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"disable_mode":0,"collision_layer":2,"collision_mask":33,"collision_priority":1.0,"input_pickable":false,"motion_mode":0,"up_direction":Vector2(0, -1),"velocity":Vector2(0, 0),"slide_on_ceiling":true,"max_slides":4,"wall_min_slide_angle":0.261799,"floor_stop_on_slope":true,"floor_constant_speed":false,"floor_block_on_wall":true,"floor_max_angle":0.785398,"floor_snap_length":1.0,"platform_on_leave":0,"platform_floor_layers":4294967295,"platform_wall_layers":0,"safe_margin":0.08,"script":ExtResource("1_8yf44"))

enemy_sprite = Object(Sprite2D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(0, 0),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"texture":ExtResource("1_y5soi"),"centered":true,"offset":Vector2(0, 0),"flip_h":false,"flip_v":false,"hframes":8,"vframes":4,"frame":6,"region_enabled":false,"region_rect":Rect2(0, 0, 0, 0),"region_filter_clip_enabled":false,"script":null)

ledge_check_left = Object(RayCast2D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(-4, 21),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"enabled":true,"exclude_parent":true,"target_position":Vector2(2.08165e-12, 2),"collision_mask":32,"hit_from_inside":false,"collide_with_areas":false,"collide_with_bodies":true,"script":null)

ledge_check_right = Object(RayCast2D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(5, 21),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"enabled":true,"exclude_parent":true,"target_position":Vector2(0, 2),"collision_mask":32,"hit_from_inside":false,"collide_with_areas":false,"collide_with_bodies":true,"script":null)

wall_check_right = Object(RayCast2D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(5, 17),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"enabled":true,"exclude_parent":true,"target_position":Vector2(5, 0),"collision_mask":32,"hit_from_inside":false,"collide_with_areas":false,"collide_with_bodies":true,"script":null)

wall_check_left = Object(RayCast2D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(-4, 17),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"enabled":true,"exclude_parent":true,"target_position":Vector2(-4, 0),"collision_mask":32,"hit_from_inside":false,"collide_with_areas":false,"collide_with_bodies":true,"script":null)

line_of_sight = Object(RayCast2D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(4, -11),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"enabled":true,"exclude_parent":true,"target_position":Vector2(180, 2.08165e-12),"collision_mask":33,"hit_from_inside":false,"collide_with_areas":false,"collide_with_bodies":true,"script":null)


[node name="Attack" type="Node" parent="StateMachine" node_paths=PackedStringArray("enemy_sprite", "enemy", "ledge_check_left", "ledge_check_right", "line_of_sight", "range_check")]
script = ExtResource("5_516a3")
enemy_sprite = NodePath("../../Sprite2D")
enemy = NodePath("../..")
ledge_check_left = NodePath("../../Raycasts/LedgeCheckLeft")
ledge_check_right = NodePath("../../Raycasts/LedgeCheckRight")
line_of_sight = NodePath("../../LineOfSight")
range_check = NodePath("../../RangeCheck")

[node name="Raycasts" type="Node2D" parent="."]

[node name="WallCheckRight" type="RayCast2D" parent="Raycasts"]
position = Vector2(5, 17)
target_position = Vector2(5, 0)
collision_mask = 32

[node name="WallCheckLeft" type="RayCast2D" parent="Raycasts"]
position = Vector2(-4, 17)
target_position = Vector2(-4, 0)
collision_mask = 32

[node name="LedgeCheckLeft" type="RayCast2D" parent="Raycasts"]
position = Vector2(-4, 21)
target_position = Vector2(2.08165e-12, 2)
collision_mask = 32

[node name="LedgeCheckRight" type="RayCast2D" parent="Raycasts"]
position = Vector2(5, 21)
target_position = Vector2(0, 2)
collision_mask = 32

[node name="LineOfSight" type="RayCast2D" parent="."]
position = Vector2(4, -11)
target_position = Vector2(180, 2.08165e-12)
collision_mask = 33

[node name="RangeCheck" type="RayCast2D" parent="."]
position = Vector2(4, -11)
target_position = Vector2(131, 0)
collision_mask = 33
